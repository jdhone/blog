<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Build Your Own Lisp Interpreter › Nick Drane</title>
  <meta name="author" content="Nick Drane">
  
  <meta name="description" content="Nick Drane&#39;s blog about programming and modern web development, particularly Node.js and React.">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta property="og:title" content="Build Your Own Lisp Interpreter"/>
  <meta property="og:site_name" content="Nick Drane"/>

  
    <meta property="og:image" content=""/>
  

  <link href="/favicon.png" rel="icon">
  <link rel="alternate" href="/atom.xml" title="Nick Drane" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  
	<script>
		(function (i, s, o, g, r, a, m) {
		i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
			(i[r].q = i[r].q || []).push(arguments)
		}, i[r].l = 1 * new Date(); a = s.createElement(o),
			m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
		})(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');

		ga('create', 'UA-107252357-1', 'auto');
		ga('send', 'pageview');

	</script>
	
</head>


<body>
  <header id="header"><div class="meta inner">
  <h1><a href="/">Nick Drane</a></h1>
  <h2><a href="/">Learn Modern Web Development</a></h2>
  <nav id="main-nav">
    <ul>
      
      <li><a href="/about">About</a></li>
      
      <li><a href="/projects">Projects</a></li>
      
      <li><a href="/archives">Archives</a></li>
      
      <li><a href="/atom.xml">RSS</a></li>
      
    </ul>
    <div class="clearfix"></div>
  </nav>
</div>
<div class="clearfix"></div>
</header>
  <div id="content" class="inner">
    <div id="main-col" class="alignleft"><div id="wrapper"><article class="post">
  <div class="post-content">
    <header>
      
  
    <h1 class="title">Build Your Own Lisp Interpreter</h1>
  

      
        <time datetime="2017-12-14T17:43:54.000Z">2017-12-14</time>
      
    </header>
    <div class="entry">
      
        <p>I read Peter Norvig’s <a href="http://norvig.com/lispy.html" target="_blank" rel="external">blog post</a> on creating a Lisp interpreter the other day, and it reminded how mind-blowing it was the first time I saw an interpreter implemented (in <a href="https://mitpress.mit.edu/sicp/full-text/book/book.html" target="_blank" rel="external">SICP</a>). This blog post walks through an interpreter I wrote in Javascript. I’ve modeled it after Norvig’s implementation, however I’ve optimized optimized for accessibility, particularly for people without Lisp experience. Furthermore, I’ve added test specs so that someone can self-guide themselves through the creation of their own implementation. The specs and solution can be found in this <a href="https://github.com/nadrane/build-your-own-lisp-interpreter" target="_blank" rel="external">GitHub repository</a>.</p>
<h2 id="A-Basic-Calculator"><a href="#A-Basic-Calculator" class="headerlink" title="A Basic Calculator"></a>A Basic Calculator</h2><p>The first step is to create a program that can take formatted text strings as input, parse them, and then perform the mathematical operations they specify. Lisp uses a notation called prefix notation. Here are some examples:</p>
<table>
<thead>
<tr>
<th>Lisp Syntax</th>
<th>Value</th>
<th>Comment</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>(+ 3 4)</code></td>
<td>7</td>
<td>As you can see, the operator comes before the operands</td>
</tr>
<tr>
<td><code>(+ 3 4 100 2)</code></td>
<td>109</td>
<td>Prefix notation allows more than 2 operands!</td>
</tr>
<tr>
<td><code>(* (+ 3 4) -3)</code></td>
<td>-21</td>
<td>Operations can be nested arbitrarily and are evaluated inside out</td>
</tr>
<tr>
<td><code>(* (+ 3 4) -3)</code></td>
<td>-36</td>
<td>Spacing it required in between an operator and an operand and between two operands. Everywhere else it has no meaning</td>
</tr>
</tbody>
</table>
<p>Parsing these expressions will involve two steps:</p>
<ol>
<li>Tokenization - Dividing up the languages parts into it’s smallest pieces, called tokens</li>
<li>Syntax analysis - Converting a sequence of tokens into a tree like structure called an Abstract Syntax Tree (or AST for short) conducive for program execution</li>
</ol>
<h2 id="Tokenization"><a href="#Tokenization" class="headerlink" title="Tokenization"></a>Tokenization</h2><p>The first thing we want to do is identify the smallest possible strings that have meaning within our language. These strings are called tokens. Looking at the above Lisp expressions, we can see that numbers have meaning, <code>(</code> and <code>)</code> have meaning, and the mathematical operators, <code>+</code> and <code>*</code> have meaning.</p>

      
    </div>
      
      <footer>
        
  
  <div class="categories">
    <a href="/categories/Javascript/">Javascript</a>, <a href="/categories/Build-Your-Own/">Build Your Own</a>
  </div>

        
        
  <div class="addthis addthis_toolbox addthis_default_style">
    
      <a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
    
    
      <a class="addthis_button_tweet"></a>
    
    
      <a class="addthis_button_google_plusone" g:plusone:size="medium"></a>
    
    
      <a class="addthis_button_pinterest_pinit" pi:pinit:layout="horizontal"></a>
    
    <a class="addthis_counter addthis_pill_style"></a>
  </div>
  <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js"></script>

      
      <div class="clearfix"></div>
      </footer>
  </div>
</article>


<section id="comment">
  
</section>


</div></div>
    <aside id="sidebar" class="alignright">
  <div class="search">
  <form action="//google.com/search" method="get" accept-charset="utf-8">
    <input type="search" name="q" results="0" placeholder="Search">
    <input type="hidden" name="q" value="site:nickdrane.com">
  </form>
</div>

  
  <div class="widget tag about">
    <ul class="entry">
      <div>
        <img class="about-photo" src="/images/about-photo.jpg" alt="photo of Nick Drane"/>
      </div>
      <p class="about-photo-text"> Nick Drane's blog about programming, hacking, software, computer security, and compute science.</p>

    </ul>
  </div>
  




  
<div class="widget tag recent-posts">
  <h3 class="title">Recent Posts</h3>
  <ul class="entry">
    
      <li>
        <a href="/build-your-own-lisp-interpreter/">Build Your Own Lisp Interpreter</a>
      </li>
    
      <li>
        <a href="/scraping-the-web-with-puppeteer-lessons-learned/">Scraping the Web with Puppeteer: Lessons Learned</a>
      </li>
    
      <li>
        <a href="/regex-and-automated-test-fuzzing/">Regex And Automated Test Fuzzing</a>
      </li>
    
      <li>
        <a href="/build-your-own-regex/">Build a Regex Engine in Less than 40 Lines of Code</a>
      </li>
    
      <li>
        <a href="/write-your-own-redux-connect/">Write Your Own React-Redux Connect</a>
      </li>
    
  </ul>
</div>


  
<div class="widget tag category">
  <h3 class="title">Categories</h3>
  <ul class="entry">
  
    <li><a href="/categories/Build-Your-Own/">Build Your Own</a><small>3</small></li>
  
    <li><a href="/categories/Functional-Programming/">Functional Programming</a><small>1</small></li>
  
    <li><a href="/categories/Immutability/">Immutability</a><small>1</small></li>
  
    <li><a href="/categories/Javascript/">Javascript</a><small>4</small></li>
  
    <li><a href="/categories/React/">React</a><small>2</small></li>
  
    <li><a href="/categories/Recursion/">Recursion</a><small>1</small></li>
  
    <li><a href="/categories/Redux/">Redux</a><small>1</small></li>
  
    <li><a href="/categories/Regular-Expressions/">Regular Expressions</a><small>2</small></li>
  
    <li><a href="/categories/Testing/">Testing</a><small>1</small></li>
  
    <li><a href="/categories/Web-Scraping/">Web Scraping</a><small>1</small></li>
  
  </ul>
</div>

</aside>
    <div class="clearfix"></div>
  </div>
  <footer id="footer" class="inner"><div class="alignleft">
  
  &copy; 2017 Nick Drane
  
</div>
<div class="clearfix"></div></footer>
  

</body>
</html>

